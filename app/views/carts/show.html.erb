<% provide :title, t("cart.your") %>
<h1><%= t"cart.your"%> (<%= @products.count %>)</h1>
<p><%= link_to t("cart.clear"), clear_cart_path, method: :delete %></p>
<% if @products.any? %>
  <table width="100%">
    <tr>
      <td><%= t "product.image" %></td>
      <td><%= t "product.name" %></td>
      <td><%= t "product.price" %></td>
      <td><%= t "product.quantity" %></td>
      <td><%= t "product.total_price" %></td>
    </tr>
    <% @products.each do |product| %>
    <tr class="cart_item">
      <td class="image">
        <%= image_tag "https://media.gettyimages.com/photos/different-types-of-food-on-rustic-wooden-table-picture-id861188910?s=612x612", size: Settings.image.minisize %>
      </td>
      <td class="name">
        <span><%= product.name %></span>
      </td>
      <td class="price">
        <span><%= number_to_currency(product.price, unit: t("index.currency")) %></span>
      </td>
      <td class="cart_quantity">
        <span font-size="500%"><%=link_to "-", descrease_path(product.id), method: :post %></span>
        <span><%= session[:cart]["#{product.id}"] %></span>
        <span font-size="500%"><%=link_to "+", increase_path(product.id), method: :post %></span>
      </td>
      <td class="total_price">
        <%= number_to_currency((session[:cart]["#{product.id}"] * product.price), unit: t("index.currency")) %>
      </td>
      <td>
        <%= link_to t("cart.remove"), remove_cart_item_path(product.id), method: :post %>
      </td>
    </tr>
    <% end %>
  </table>
  <h2 align="right">
    <%= t("cart.total") %><%= number_to_currency(@totals.round(2), unit: t("index.currency")) %>
  </h2>
<% else %>
  <h1 align="center"><%= t "cart.nothing" %></h1>
  <p align="center"><%= link_to t("index.buy_now"), root_path %>
<% end %>
<%= will_paginate @products,
  params: { controller: :carts, action: :show } %>
